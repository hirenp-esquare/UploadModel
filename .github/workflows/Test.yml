# This is a basic workflow to help you get started with Actions

name: Test

# Controls when the action will run. Triggers the workflow on push or pull request
# events but only for the master branch
on:
  push:
    branches: [ Test,Dev ]
    paths:
    - '**.html'
  pull_request:
    branches: [master]
    types: [closed]
    paths:
    - '**.html'

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  getFileNameList:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest #windows-latest #ubuntu-latest
   
      
    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      - uses: actions/checkout@v2
        with:
         fetch-depth: "0"
      
      - name: Sleep for 60 seconds
        uses: jakejarvis/wait-action@master
        with:
          time: '3m'
      
      - id: changedFiles
        uses: jitterbit/get-changed-files@v1
      
         
      - name: Extract branch name
        #shell: bash
        run: echo "##[set-output name=branch;]$(echo ${GITHUB_REF#refs/heads/})"
        id: extract_branch

      - name: Uploading SDM DOC to another Repository (jamesmrollins/MTL-DEMO)
        run: |
          chmod +x .github/workflows/UploadingDemoSDDOCUtility.sh
          awk '{ sub("\r$", ""); print }' .github/workflows/UploadingDemoSDDOCUtility.sh > .github/workflows/UploadingDemoSDDOCUtility2.sh
          mv .github/workflows/UploadingDemoSDDOCUtility2.sh .github/workflows/UploadingDemoSDDOCUtility.sh
          chmod +x .github/workflows/UploadingDemoSDDOCUtility.sh 
          .github/workflows/UploadingDemoSDDOCUtility.sh "blue/mtl2.0_models/*.html" 'jamesmrollins/MTL-DEMO' "${{ steps.extract_branch.outputs.branch }}" 'static' 'hirenp@waferwire.com' 'hirenp-waferwire' "Model file is Uploaded by ${{ github.event.repository.name }}" "${{ secrets.API_TOKEN_GITHUB }}"
        
    
          
     
      
         
  
         
      
 
   
   
